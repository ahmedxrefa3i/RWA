secureAPI.setBaseURL("https://rico-secure-backend.onrender.com");let encryptedAccessLink="";async function testAPIConnection(){try{const e=await secureAPI.healthCheck();console.log("✅ API Connection successful:",e),showNotification("API Connected Successfully","success")}catch(e){console.error("❌ API Connection failed:",e),showNotification("API Connection Failed - Check console for details","error")}}function initializeEventListeners(){const e=document.getElementById("passwordInput");e&&e.addEventListener("keypress",e=>{"Enter"===e.key&&checkPassword()})}function hideLoadingScreen(){const e=document.getElementById("loadingScreen");e&&(e.style.opacity="0",setTimeout(()=>{e.style.display="none"},500))}async function checkPassword(){const e=document.getElementById("passwordInput"),n=e.value.trim(),t=document.querySelector(".access-btn"),s=t.innerHTML;if(!n)return showError("Please enter an access code");t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Verifying...',t.disabled=!0;try{const e=await secureAPI.verifyPassword(n,"main");e.success&&e.url?(encryptedAccessLink=e.url,showSuccess("Access granted!"),setTimeout(()=>{const e=document.getElementById("contentFrame");e.src=encryptedAccessLink,e.style.display="block";const n=document.querySelector("button[onclick*='alertBox']");n&&(n.style.display="none");const t=document.querySelector(".access-form");t&&(t.style.display="none"),history.replaceState({},document.title,window.location.pathname)},1e3)):showError(e.error||"Invalid access code")}catch(e){console.error("Password verification error:",e),showError("Connection error. Please try again.")}finally{t.innerHTML=s,t.disabled=!1,e.value=""}}function showError(e){const n=document.getElementById("errorMsg"),t=n?.querySelector(".message-text");t&&(t.textContent=e),n&&(n.style.display="flex",setTimeout(()=>n.style.display="none",5e3))}function showSuccess(e){const n=document.getElementById("successMsg"),t=n?.querySelector(".message-text");t&&(t.textContent=e),n&&(n.style.display="flex",setTimeout(()=>n.style.display="none",5e3))}function showNotification(e,n="info"){const t=document.createElement("div");t.className=`notification notification-${n}`,t.innerHTML=`\n        <i class="fas fa-${"success"===n?"check-circle":"error"===n?"exclamation-triangle":"info-circle"}"></i>\n        <span>${e}</span>\n    `;(document.getElementById("notificationContainer")||document.body).appendChild(t),setTimeout(()=>t.classList.add("show"),10),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>t.remove(),300)},4e3)}document.addEventListener("DOMContentLoaded",()=>{console.log("🚀 Rico World - Secure Version Loaded"),testAPIConnection(),initializeEventListeners(),setTimeout(hideLoadingScreen,2e3)}),window.checkPassword=checkPassword;
